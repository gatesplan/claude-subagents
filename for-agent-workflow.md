# Claude Code와 서브에이전트 협업 워크플로우

Claude Code가 서브에이전트들을 효율적으로 활용하기 위한 협업 프로세스.

## 기본 협업 원칙

### 1. 단방향 소통
- Claude Code → 서브에이전트: 작업 지시
- 서브에이전트 → Claude Code: 완료 보고 (간소화)
- 서브에이전트 간 직접 소통 없음

### 2. 컨텍스트 제공
- 서브에이전트에게 충분한 컨텍스트와 범위 명시
- 기존 코드 분석이 필요한 경우 관련 파일 경로 제공
- 작업 목적과 제약사항 명확히 전달

### 3. 결과 검증
- 서브에이전트의 완료 보고는 최소한으로 진행되며, 특별한 이유가 없으면 믿고 다음 작업 진행
- 필요시 추가 수정이나 다른 서브에이전트 활용

## 일반적인 워크플로우 패턴

### 새 기능 개발
```
Claude Code: 요구사항 분석 및 설계
    ↓
python-programmer: 코드 구현
    ↓
python-testbuilder: 테스트 작성
    ↓  
python-tester: 테스트 실행 및 분석
    ↓
[오류 발생시] programmer 또는 testbuilder에게 수정 요청
    ↓
python-reviewer: 코드 품질 검토
    ↓
python-documenter: 문서 작성
```

### 버그 수정
```
Claude Code: 문제 상황 파악
    ↓
python-tester: 현재 테스트 실행으로 문제 분석
    ↓
python-programmer: 분석 결과 기반 코드 수정
    ↓
python-tester: 수정 사항 재검증
```

### 코드 개선
```
Claude Code: 개선 필요 영역 식별
    ↓
python-reviewer: 현재 코드 품질 분석
    ↓
python-programmer: 개선안 구현
    ↓
python-tester: 개선 후 검증
```

## 파일 기반 협업

### 테스트 결과 추적
- python-tester가 생성하는 `testlog-{datetime}.md` 파일 모니터링
- 오류 분류에 따른 적절한 후속 조치 결정

### 프로젝트 메모리 (향후 확장)
- `.claude/shared/` 폴더의 아키텍처 관련 파일들
- 프로젝트 진화에 따른 결정 사항 추적

## 효율성 최적화

### 토큰 절약
- 서브에이전트별 완료 보고는 최소화
- 상세 분석은 결과물에서 직접 확인
- 불필요한 중간 보고 과정 생략

### 병렬 작업
- 독립적인 작업들은 동시에 여러 서브에이전트 활용 가능
- 예: 코드 구현과 문서 작성을 별도로 진행

### 재작업 최소화
- 명확한 컨텍스트와 요구사항 제공으로 재작업 방지
- 서브에이전트의 전문성을 신뢰하되 결과는 검증

## 예외 상황 처리

### 서브에이전트 작업 실패
- 다른 전문 서브에이전트에게 재의뢰
- 필요시 작업 범위나 접근 방식 조정

### 복합적 문제 상황
- Claude Code가 직접 판단하여 단계별 해결
- 여러 서브에이전트를 순차적 또는 병렬로 활용

### 설계 수준 문제
- 현재는 Claude Code가 직접 아키텍처 결정
- 향후 global-architector 등 추가 가능